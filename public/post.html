<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ntchito Recruiter Portal</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
  /* ========== RESET & BASE ========== */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  body {
    font-family: "Inter", sans-serif;
    background: #f9fafb;
    color: #222;
    line-height: 1.6;
  }
  a {
    text-decoration: none;
    color: inherit;
    transition: 0.3s;
  }

 
.center-modal {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px 0;
}

  /* ========== HEADER ========== */
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 60px;
    background: white;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    position: sticky;
    top: 0;
    z-index: 10;
  }
  header h1 {
    font-size: 1.8rem;
    font-weight: 700;
    color: #bb0303;
    letter-spacing: 1px;
  }
  header nav a {
    margin-left: 25px;
    font-weight: 500;
    color: #555;
    position: relative;
  }
  header nav a::after {
    content: "";
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 0%;
    height: 2px;
    background: #bb0303;
    transition: width 0.3s ease;
  }
  header nav a:hover {
    color: #bb0303;
  }
  header nav a:hover::after {
    width: 100%;
  }

  /* ========== HERO SECTION ========== */
/* ========== HERO SECTION ========== */
  .hero {
    background: linear-gradient(135deg, #0a66c2, #0073b1);
    color: white;
    text-align: center;
    padding: 235px 30px;
    background-image: url('assets/img/img (2).jpg');
    background-size: cover;
    background-position: center;
    background-blend-mode: overlay;
  }
  .hero h2 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 15px;
  }
  .hero p {
    font-size: 1.1rem;
    opacity: 0.9;
  }

  /* ========== JOBS SECTION ========== */
  #jobsSection {
    max-width: 1100px;
    margin: 60px auto;
    padding: 0 20px;
  }
  .section-title {
    font-size: 1.8rem;
    margin-bottom: 25px;
    color: #cb0e00;
    font-weight: 700;
  }
  .job-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
  }
  .job-card {
    background: white;
    border-radius: 10px;
    padding: 25px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    transition: 0.3s;
  }
  .job-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
  }
  .job-card h4 {
    font-size: 1.2rem;
    margin-bottom: 8px;
    color: #0a66c2;
  }
  .job-card p {
    font-size: 0.95rem;
    color: #555;
  }
  .apply-btn {
    display: inline-block;
    margin-top: 12px;
    padding: 8px 18px;
    border-radius: 20px;
    background: #0a66c2;
    color: white;
    font-weight: 600;
    transition: 0.3s;
  }
  .apply-btn:hover {
    background: #084d96;
  }

  /* ========== FOOTER ========== */
  footer {
    text-align: center;
    padding: 25px;
    background: #bb0303;
    color: white;
    margin-top: 60px;
    font-size: 0.9rem;
  }

  /* ========== RESPONSIVE ========== */
  @media (max-width: 768px) {
    header {
      flex-direction: column;
      text-align: center;
      padding: 15px;
    }
    header nav a {
      margin: 10px;
      display: inline-block;
    }
    .hero h2 {
      font-size: 2rem;
    }
  }

  /* ===== Reset & Base ===== */
  *{box-sizing:border-box;margin:0;padding:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}
  :root{
     --primary: #ad0303;
    --muted:#68707d;
    --bg:#f5f7fb;
    --card:#ffffff;
    --radius:12px;
    --step-size:44px;
  }

  /* ===== Modal ===== */
  .modal{width:100%;max-width:820px;background:var(--card);border-radius:16px;box-shadow:0 20px 50px rgba(16,24,40,0.12);overflow:hidden;border:1px solid rgba(99,102,241,0.06)}
  .container{display:grid;grid-template-columns:320px 1fr;min-height:560px}
  @media(max-width:880px){ .container{grid-template-columns:1fr} }

  /* ===== Left Panel (Stepper) ===== */
  .left{
    background:linear-gradient(180deg, rgba(108,99,255,0.06), rgba(108,99,255,0.02));
    padding:22px;
    border-right:1px solid rgba(16,24,40,0.03);
  }
  .brand{display:flex;gap:12px;align-items:center;margin-bottom:18px}
  .brand .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--primary),#4b46d9);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
  .brand h3{font-size:16px;color:#111827}
  .steps{margin-top:8px}
  .step-item{display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;cursor:pointer;transition:all .25s}
  .step-item:hover{background:rgba(99,102,241,0.04)}
  .step-icon{width:var(--step-size);height:var(--step-size);display:flex;align-items:center;justify-content:center;border-radius:10px;border:1px solid rgba(99,102,241,0.12);color:var(--muted)}
  .step-labels{display:flex;flex-direction:column}
  .step-labels .title{font-weight:600;color:#0f172a;font-size:13px}
  .step-labels .subtitle{font-size:12px;color:var(--muted)}
  .step-item.active .step-icon{background:var(--primary);color:white;border-color:transparent;box-shadow:0 6px 18px rgba(99,102,241,0.18)}
  .progress-line{height:8px;background:transparent;margin-top:20px;border-radius:999px;position:relative;overflow:hidden}
  .progress-bg{position:absolute;left:0;right:0;top:0;bottom:0;background:#eef2ff}
  .progress-fill{position:absolute;left:0;top:0;bottom:0;background:linear-gradient(90deg,var(--primary),#4b46d9);width:0%;transition:width .45s cubic-bezier(.2,.9,.25,1)}
  @media(max-width:880px){ .left{order:2;padding:16px} .progress-line{display:block;margin-top:12px} }

  /* ===== Right Panel (Steps content) ===== */
  .right{padding:28px 30px}
  .step-content{display:none;opacity:0;transform:translateY(12px);transition:all .45s cubic-bezier(.2,.9,.25,1)}
  .step-content.active{display:block;opacity:1;transform:none}
  h2{font-size:20px;margin-bottom:10px;color:#ad0303}
  label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
  .row{display:flex;gap:12px}
  .col{flex:1}
  input[type="text"],input[type="email"],input[type="tel"],input[type="date"],select,textarea{
    width:100%;padding:12px 14px;border-radius:10px;border:1px solid #e6e9f2;background:white;font-size:14px;color:#0f172a;transition:box-shadow .18s,border-color .18s;
  }
  input:focus,select:focus,textarea:focus{outline:none;box-shadow:0 6px 20px rgba(99,102,241,0.08);border-color:var(--primary)}
  .small{font-size:13px;color:var(--muted);margin-bottom:10px}
  .actions{display:flex;justify-content:flex-end;gap:10px;margin-top:18px}
  .btn{padding:10px 14px;border-radius:10px;border:none;background:var(--primary);color:white;cursor:pointer;font-weight:600;box-shadow:0 8px 20px rgba(99,102,241,0.12)}
  .btn.ghost{background:transparent;color:var(--muted);border:1px solid rgba(15,23,42,0.06)}
  .btn.secondary{background:#111827;color:white}

  /* ===== Phone with flag & code ===== */
  .phone-wrap{display:flex;gap:8px;align-items:center}
  .flag-block{display:flex;align-items:center;gap:8px;padding:8px 10px;border-radius:10px;background:#fff;border:1px solid #e6e9f2;min-width:120px}
  .flag-emoji{font-size:20px}
  .country-code{font-weight:600;color:#111827}
  .phone-input{flex:1}

  /* ===== Suggestions & Chips ===== */
  .suggestions{margin-top:6px;border:1px solid #eef2ff;border-radius:10px;background:white;max-height:140px;overflow:auto}
  .suggestion-item{padding:8px 12px;cursor:pointer}
  .suggestion-item:hover{background:#f3f4ff}
  .chip-container{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
  .chip{background:rgba(108,99,255,0.14);color:var(--primary);padding:6px 10px;border-radius:999px;font-weight:600;display:inline-flex;gap:8px;align-items:center}
  .chip button{background:transparent;border:none;color:var(--primary);cursor:pointer;font-weight:800;padding:0}

  /* ===== Multi-select nicer styling (job type) ===== */
  select[multiple]{height:120px;padding:12px;border-radius:10px}

  /* ===== Education cards area ===== */
  .edu-controls{display:flex;align-items:center;gap:8px;margin-bottom:12px}
  .edu-list{display:flex;flex-direction:column;gap:12px;margin-top:12px}
  .edu-card{background:#fff;border-radius:10px;padding:12px;border:1px solid #eef2ff;display:flex;align-items:center;justify-content:space-between}
  .edu-info{display:flex;flex-direction:column;gap:6px}
  .edu-actions{display:flex;gap:8px}
  .badge{font-size:12px;color:var(--muted);background:rgba(15,23,42,0.03);padding:6px 8px;border-radius:8px}

  /* ===== Links popup ===== */
  .overlay{position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(2,6,23,0.45);display:flex;align-items:center;justify-content:center;z-index:200}
  .popup{background:white;padding:18px;border-radius:12px;width:420px;box-shadow:0 20px 60px rgba(2,6,23,0.2)}

  /* ===== Success screen & confetti ===== */
  .success-screen{display:none;padding:34px;text-align:center}
  .success-screen.active{display:block}
  .check{width:92px;height:92px;border-radius:999px;margin:16px auto;background:linear-gradient(90deg,var(--primary),#4b46d9);display:flex;align-items:center;justify-content:center;color:white;font-size:44px;box-shadow:0 12px 40px rgba(99,102,241,0.18)}
  .success-screen p{color:var(--primary);font-weight:700;margin-top:8px}
  /* Confetti canvas */
  #confettiCanvas{position:absolute;left:0;top:0;pointer-events:none;z-index:150}

  /* small */
  .muted{color:var(--muted);font-size:13px}
  .field-row{margin-bottom:12px}
</style>
</head>
<body>

  <header>
    <h1>Ntchito</h1>
    <nav>
      <a href="#">Home</a>
      <a href="#">Recruiters</a>
      <a href="#">Post Jobs</a>
      <a href="#">Contact</a>
    </nav>
  </header>

  <section class="hero">
    <h2>Hire the best talent across SADC</h2>
    <p>Join thousands of recruiters connecting with skilled professionals effortlessly.</p>
  </section>

  <section id="recruiterDashboard">
    <h2>Welcome, <span id="companyNameDisplay">Recruiter</span> 👋</h2>
    <p>Here are your recent job posts and candidates.</p>
    <div class="dashboard-grid" id="jobsList">
      <div class="job-card"><h3>Software Engineer</h3><p>Applications: 42</p></div>
      <div class="job-card"><h3>Marketing Lead</h3><p>Applications: 23</p></div>
      <div class="job-card"><h3>Sales Manager</h3><p>Applications: 18</p></div>
    </div>
  </section>

  <footer>© 2025 Ntchito Careers — All Rights Reserved.</footer>

  <!-- Onboarding Modal -->
  <div class="center-modal">
<div class="modal" id="modal">
  <div class="container">

    <!-- LEFT: stepper + progress -->
    <aside class="left">
      <div class="brand">
        <div class="logo">JS</div>
        <div>
          <h3>Job Seeker Signup</h3>
          <div class="muted">Setup your profile — 7 quick steps</div>
        </div>
      </div>

      <div class="steps" id="stepsList">
        <!-- Step items will be rendered by JS for dynamic active states -->
      </div>

      <div class="progress-line" aria-hidden>
        <div class="progress-bg"></div>
        <div class="progress-fill" id="progressFill"></div>
      </div>
    </aside>

<!-- RIGHT: content -->
    <main class="right">

      <!-- Step 1 -->
      <section class="step-content active" data-step="1" id="step-1">
        <h3>Company Details</h3>
	<div class="field-row">
        <label>Company Name</label><input id="companyName" type="text" placeholder="e.g. Ntchito Holdings" />
	</div>
	<div class="field-row">
        <label>Industry</label><input id="industry" type="text" placeholder="e.g. Technology, Finance" />
	</div>
	<div class="field-row">
        <label>Company Reg. Number / ID</label><input id="regNo" type="text" placeholder="e.g. RC1234567" />
	</div>
    	<div class="actions">
          <button class="btn ghost" onclick="goStep(2)">Next →</button>
        </div>
      </section>

      <!-- Step 2 -->
       <section class="step-content" data-step="2" id="step-2">
       <h3>Location & Contact</h3>
<label>Country</label>
<select id="country">
  <option value="">Select Country</option>
  <option value="AO">Angola</option>
  <option value="BW">Botswana</option>
  <option value="CD">DR Congo</option>
  <option value="SZ">Eswatini</option>
  <option value="LS">Lesotho</option>
  <option value="MG">Madagascar</option>
  <option value="MW">Malawi</option>
  <option value="MU">Mauritius</option>
  <option value="MZ">Mozambique</option>
  <option value="NA">Namibia</option>
  <option value="SC">Seychelles</option>
  <option value="ZA">South Africa</option>
  <option value="TZ">Tanzania</option>
  <option value="ZM">Zambia</option>
  <option value="ZW">Zimbabwe</option>
</select>
        <label>Province / District</label><select id="district"></select>
        <label>Town</label><select id="town"></select>
        <div class="field-row">
          <label for="phone">Phone number</label>
          <div class="phone-wrap">
            <div class="flag-block" id="flagBlock" aria-hidden>
              <div class="flag-emoji" id="flagEmoji">🏳️</div>
              <div class="country-code" id="countryCode">+000</div>
            </div>
            <div class="phone-input" style="flex:1">
              <input id="phone" type="tel" placeholder="e.g. 772 123 456" />
            </div>
          </div>
			<div class="actions">
          <button class="btn ghost" onclick="goStep(1)">← Back</button>
          <button class="btn" onclick="goStep(3)">Next →</button>
        </div>
      </section>

      <!-- Step 3 -->
     <!-- Step 3 -->
<section class="step-content" data-step="3" id="step-3">
  <h3>Upload Company Certificates</h3>
  <div class="edu-controls">
    <button class="btn" onclick="openCertPopup()">Add Certificate</button>
  </div>
  <div class="edu-list" id="certList">
    <!-- Certificate cards will be rendered here -->
  </div>
	<div class="actions">
          <button class="btn ghost" onclick="goStep(2)">← Back</button>
          <button class="btn" onclick="goStep(4)">Next →</button>
        </div>
</section>

      <!-- Step 4 -->
      <section class="step-content" data-step="4" id="step-4">
        <h3>Company Type & Size</h3>
        <label>Type of Company</label>
        <select id="companyType">
          <option value="">Select type</option><option>Private Limited</option>
          <option>Public Limited</option><option>Non-Profit</option>
          <option>Startup</option><option>Government</option>
        </select>
        <label>Number of Employees</label>
        <select id="employeeCount">
          <option value="">Select</option><option>1-10</option><option>11-50</option>
          <option>51-200</option><option>201-500</option><option>500+</option>
        </select>
      <div class="actions">
          <button class="btn ghost" onclick="goStep(2)">← Back</button>
          <button class="btn" onclick="goStep(4)">Next →</button>
        </div>
	  </section>

      <!-- Step 5 -->
      <!-- Step 5 -->
<section class="step-content" data-step="5" id="step-5">
  <h2>5. Recruitment Focus</h2>

  <label for="interestInput">Type and select from suggestions (max 7)</label>
  <input id="interestInput" type="text" placeholder="e.g. IT, Marketing, Sales..." oninput="showSuggestions(this.value)" onkeydown="handleInterestKey(event)" />
  <div class="suggestions" id="suggestionsBox" role="listbox" aria-label="suggestions"></div>
  <div class="chip-container" id="chipsWrap" aria-live="polite"></div>

  <div class="small muted">We show suggestions when you type; click one to add it. You can add custom ones too (press Enter).</div>

  <div class="actions">
    <button class="btn ghost" onclick="goStep(4)">← Back</button>
    <button class="btn" onclick="goStep(6)">Next →</button>
  </div>
</section>


      <!-- Step 6 -->
      <section class="step-content" data-step="6" id="step-6">
        <h3>Online Presence</h3>
        <label>Company Website</label><input id="website" type="text" placeholder="https://company.com" />
        <label>LinkedIn</label><input id="linkedin" type="text" placeholder="https://linkedin.com/company/..." />
      <div class="actions">
          <button class="btn ghost" onclick="goStep(4)">← Back</button>
          <button class="btn" onclick="goStep(6)">Next →</button>
        </div>
      </section>

      <!-- Step 7 -->
      <section class="step-content" data-step="7" id="step-7">
        <h3>Review & Submit</h3>
        <div id="reviewArea"></div>
      <div class="actions">
          <button class="btn ghost" onclick="goStep(6)">← Back</button>
          <button class="btn secondary" onclick="submitProfile()">Submit</button>
        </div>
      </section>

 <section class="success-screen" id="successScreen">
        <div class="check">✓</div>
        <p>Profile submitted successfully!</p>
        <div class="muted">Welcome to Ntchito Recruiter Dashboard</div>
      </section>
       </main>

     
    </div>
  </div>


<!-- Certificate popup template -->
<div id="certPopupTemplate" style="display:none;">
  <div class="overlay" id="certOverlay" onclick="closeCertPopup()">
    <div class="popup" onclick="event.stopPropagation()">
      <h3 style="margin-bottom:8px">Add Certificate</h3>
      <label for="certName">Certificate Name</label>
      <input id="certName" type="text" placeholder="e.g. Company Registration" />
      <label for="certFile" style="margin-top:8px">Upload File</label>
      <input id="certFileInput" type="file" />
      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px">
        <button class="btn ghost" onclick="closeCertPopup()">Cancel</button>
        <button class="btn" onclick="saveCertificate()">Save</button>
      </div>
    </div>
  </div>
</div>

  <canvas id="confettiCanvas"></canvas>
<!-- links popup template -->
<div id="linkPopup" style="display:none;">
  <div class="overlay" id="overlay" onclick="closeLinkPopup()">
    <div class="popup" onclick="event.stopPropagation()">
      <h3 style="margin-bottom:8px">Add link</h3>
      <label for="linkName">Name (e.g. Portfolio)</label>
      <input id="linkName" type="text" placeholder="e.g. Portfolio" />
      <label for="linkUrl" style="margin-top:8px">URL / Address</label>
      <input id="linkUrl" type="text" placeholder="https://..." />
      <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px">
        <button class="btn ghost" onclick="closeLinkPopup()">Cancel</button>
        <button class="btn" onclick="saveLink()">Save</button>
      </div>
    </div>
  </div>
</div>
<script src="https://unpkg.com/feather-icons@4.29.2/dist/feather.min.js"></script>
<script>
  feather.replace();

  // ========== Constants & Global State ==========
  const STORAGE_KEY = 'ntchito_recruiter';
  let current = 1;
  let links = [];
  let interests = [];
  const maxInterests = 7;

  // ========== Step Metadata ==========
  const stepsMeta = [
    { id: 1, label: "Company Details", sub: "Name, industry, reg no", icon: "briefcase" },
    { id: 2, label: "Location & Contact", sub: "Country, district, phone", icon: "map-pin" },
    { id: 3, label: "Certificates", sub: "Upload company docs", icon: "file-text" },
    { id: 4, label: "Company Type", sub: "Size and structure", icon: "layers" },
    { id: 5, label: "Recruitment Focus", sub: "Departments & roles", icon: "users" },
    { id: 6, label: "Online Presence", sub: "Website & LinkedIn", icon: "globe" },
    { id: 7, label: "Review & Submit", sub: "Final check", icon: "check-circle" }
  ];

  // ========== Location Data ==========
  const districts = {
  'ZW':['Harare','Bulawayo','Manicaland','Mashonaland Central'],
  'ZA':['Gauteng','Western Cape','KwaZulu-Natal'],
  'BW':['Gaborone','Francistown'],
  'NA':['Khomas','Erongo'],
  'MZ':['Maputo','Beira'],
  'ZM':['Lusaka','Ndola'],
  'TZ':['Dar es Salaam','Dodoma']
};
const towns = {
  'Harare':['Harare CBD','Chisipite','Borrowdale'],
  'Bulawayo':['Khami','Nkulumane'],
  'Gauteng':['Johannesburg','Pretoria'],
  'Western Cape':['Cape Town','Stellenbosch'],
  'KwaZulu-Natal':['Durban','Pietermaritzburg'],
  'Maputo':['Maputo City'],
  'Lusaka':['Lusaka Central']
};
const countryData = {
  'ZW':{name:'Zimbabwe',flag:'🇿🇼',code:'+263'},
  'ZA':{name:'South Africa',flag:'🇿🇦',code:'+27'},
  'BW':{name:'Botswana',flag:'🇧🇼',code:'+267'},
  'NA':{name:'Namibia',flag:'🇳🇦',code:'+264'},
  'MZ':{name:'Mozambique',flag:'🇲🇿',code:'+258'},
  'ZM':{name:'Zambia',flag:'🇿🇲',code:'+260'},
  'TZ':{name:'Tanzania',flag:'🇹🇿',code:'+255'}
};

  // ========== Interest Suggestions ==========
const interestSuggestions = [
  'Accounting',
  'Administration',
  'Agriculture',
  'Architecture',
  'Automotive',
  'Banking',
  'Business Development',
  'Civil Engineering',
  'Customer Support',
  'Data Science',
  'Design',
  'Education',
  'Electrical Engineering',
  'Engineering',
  'Finance',
  'Healthcare',
  'Hospitality',
  'Human Resources',
  'IT',
  'Legal',
  'Logistics',
  'Manufacturing',
  'Marketing',
  'Mechanical Engineering',
  'Mechanic',
  'Medical Laboratory',
  'Nursing',
  'Operations',
  'Pharmacy',
  'Procurement',
  'Product Management',
  'Project Management',
  'Public Relations',
  'Quality Assurance',
  'Sales',
  'Security',
  'Social Work',
  'Software Development',
  'Teaching',
  'UX/UI',
  'Veterinary'
];


  // ========== Local Storage ==========
  function saveState(state) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
  }

  function loadState() {
    try {
      return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};
    } catch (e) {
      return {};
    }
  }

  function persistFromInputs() {
    const s = loadState();
    s.companyName = document.getElementById('companyName')?.value || '';
    s.industry = document.getElementById('industry')?.value || '';
    s.regNo = document.getElementById('regNo')?.value || '';
    s.country = document.getElementById('country')?.value || '';
    s.district = document.getElementById('district')?.value || '';
    s.town = document.getElementById('town')?.value || '';
    s.phone = document.getElementById('phone')?.value || '';
    s.companyType = document.getElementById('companyType')?.value || '';
    s.employeeCount = document.getElementById('employeeCount')?.value || '';
    s.departments = document.getElementById('departments')?.value || '';
    s.website = document.getElementById('website')?.value || '';
    s.linkedin = document.getElementById('linkedin')?.value || '';
    s.interests = interests;
    saveState(s);
  }

  // ========== Stepper UI ==========
  const stepsList = document.getElementById('stepsList');
  stepsMeta.forEach(s => {
    const el = document.createElement('div');
    el.className = 'step-item';
    el.dataset.step = s.id;
    el.innerHTML = `
      <div class="step-icon"><i data-feather="${s.icon}"></i></div>
      <div class="step-labels">
        <div class="title">${s.id}. ${s.label}</div>
        <div class="subtitle">${s.sub}</div>
      </div>`;
    el.addEventListener('click', () => goStep(s.id));
    stepsList.appendChild(el);
  });
	feather.replace();

  function updateStepper(active) {
    document.querySelectorAll('.step-item').forEach(si => {
      si.classList.toggle('active', Number(si.dataset.step) === active);
    });
    const pct = ((active - 1) / (stepsMeta.length - 1)) * 100;
    document.getElementById('progressFill').style.width = pct + '%';
  }

  function goStep(n) {
    if (n < 1 || n > 7) return;
    persistFromInputs();
    current = n;
    document.querySelectorAll('.step-content').forEach(sec => {
      sec.classList.toggle('active', Number(sec.dataset.step) === n);
    });
    document.getElementById('successScreen').classList.remove('active');
    updateStepper(n);
    if (n === 7) renderReview();
  }

  // ========== Escape HTML ==========
  function escapeHtml(str) {
    return str.replace(/[&<>"']/g, tag => ({
      '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;'
    }[tag]));
  }

  // ========== Interest Chips ==========
  function showSuggestions(input) {
    const box = document.getElementById('suggestionsBox');
    box.innerHTML = '';
    if (!input.trim()) return;

    const matches = interestSuggestions.filter(s =>
      s.toLowerCase().includes(input.toLowerCase()) &&
      !interests.includes(s)
    ).slice(0, 5);

    matches.forEach(s => {
      const div = document.createElement('div');
      div.className = 'suggestion-item';
      div.textContent = s;
      div.onclick = () => addChip(s);
      box.appendChild(div);
    });
  }

  function handleInterestKey(e) {
    if (e.key === 'Enter') {
      e.preventDefault();
      const val = e.target.value.trim();
      if (val && !interests.includes(val)) addChip(val);
      e.target.value = '';
      document.getElementById('suggestionsBox').innerHTML = '';
    }
  }

  function addChip(label) {
    if (interests.length >= maxInterests) return alert('You can only add up to 7 interests');
    interests.push(label);
    renderChips();
    persistFromInputs();
  }

  function removeChip(label) {
    interests = interests.filter(i => i !== label);
    renderChips();
    persistFromInputs();
  }

  function renderChips() {
    const wrap = document.getElementById('chipsWrap');
    wrap.innerHTML = '';
    interests.forEach(i => {
      const chip = document.createElement('div');
      chip.className = 'chip';
      chip.innerHTML = `${escapeHtml(i)} <button onclick="removeChip('${i}')">×</button>`;
      wrap.appendChild(chip);
    });
  }

	 /* ===========================
  Step 2: Cascading dropdown + phone updates
=========================== */
const countrySelect = document.getElementById('country');
const districtSelect = document.getElementById('district');
const townSelect = document.getElementById('town');
countrySelect.addEventListener('change', ()=>{
  const code = countrySelect.value;
  districtSelect.innerHTML = '<option value="">Select district</option>';
  townSelect.innerHTML = '<option value="">Select town</option>';
  if(code && districts[code]) districts[code].forEach(d=>districtSelect.insertAdjacentHTML('beforeend', `<option value="${d}">${d}</option>`));
  // set flag and country code
  const cd = countryData[code];
  document.getElementById('flagEmoji').textContent = cd?cd.flag:'🏳️';
  document.getElementById('countryCode').textContent = cd?cd.code:'+000';
  persistFromInputs();
});
districtSelect.addEventListener('change', ()=>{
  const val = districtSelect.value;
  townSelect.innerHTML = '<option value="">Select town</option>';
  if(towns[val]) towns[val].forEach(t=>townSelect.insertAdjacentHTML('beforeend', `<option value="${t}">${t}</option>`));
  persistFromInputs();
});

  // ========== Review & Submit ==========
  function renderReview() {
    const s = loadState();
    document.getElementById('reviewArea').innerHTML = `
      <div><strong>Company:</strong> ${s.companyName}</div>
      <div><strong>Industry:</strong> ${s.industry}</div>
      <div><strong>Reg No:</strong> ${s.regNo}</div>
      <div><strong>Location:</strong> ${s.country} / ${s.district} / ${s.town}</div>
      <div><strong>Phone:</strong> ${s.phone}</div>
      <div><strong>Type:</strong> ${s.companyType}</div>
      <div><strong>Employees:</strong> ${s.employeeCount}</div>
      <div><strong>Departments:</strong> ${s.departments}</div>
      <div><strong>Website:</strong> ${s.website}</div>
      <div><strong>LinkedIn:</strong> ${s.linkedin}</div>`;
  }

  function submitProfile() {
    persistFromInputs();
    const state = loadState();
    document.getElementById('successScreen').classList.add('active');
    startConfetti();
    saveState(state);
    setTimeout(() => {
      document.getElementById('modal').style.display = 'none';
      document.getElementById('jobsSection').style.display = 'block';
      document.getElementById('companyNameDisplay').textContent = state.companyName;
    }, 2000);
  }

	 let certificates = []; // {id, name, fileName}

function openCertPopup() {
  document.body.insertAdjacentHTML('beforeend', document.getElementById('certPopupTemplate').innerHTML);
  document.getElementById('certOverlay').style.display = 'flex';
}

function closeCertPopup() {
  document.getElementById('certOverlay')?.remove();
}

function saveCertificate() {
  const name = document.getElementById('certName').value.trim();
  const fileInput = document.getElementById('certFileInput');
  const fileName = fileInput?.files?.[0]?.name || '';
  if (!name || !fileName) return alert('Please provide both a name and file');
  certificates.push({ id: Date.now(), name, fileName });
  renderCertificates();
  closeCertPopup();
  persistFromInputs();
}

function renderCertificates() {
  const area = document.getElementById('certList');
  area.innerHTML = '';
  certificates.forEach(c => {
    const div = document.createElement('div');
    div.className = 'edu-card';
    div.innerHTML = `
      <div class="edu-info">
        <div style="font-weight:700">${escapeHtml(c.name)}</div>
        <div class="muted">${escapeHtml(c.fileName)}</div>
      </div>
      <div class="edu-actions">
        <button class="btn ghost" onclick='editCertificate(${c.id})'>Edit</button>
        <button class="btn" onclick='removeCertificate(${c.id})'>Remove</button>
      </div>`;
    area.appendChild(div);
  });
}

function editCertificate(id) {
  const found = certificates.find(c => c.id === id);
  if (!found) return;
  openCertPopup();
  document.getElementById('certName').value = found.name;
  certificates = certificates.filter(c => c.id !== id);
}

function removeCertificate(id) {
  certificates = certificates.filter(c => c.id !== id);
  renderCertificates();
  persistFromInputs();
}


  // ========== Confetti ==========
  const canvas = document.getElementById('confettiCanvas');
  const ctx = canvas.getContext('2d');
  let confetti = [];

  function setupConfetti() {
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);
  }

  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }

  function startConfetti() {
    confetti = [];
    for (let i = 0; i < 100; i++) {
      confetti.push({
        x: Math.random() * canvas.width,
        y: Math.random() * -canvas.height,
        color: `hsl(${Math.random() * 360},100%,60%)`,
        size: 6 + Math.random() * 6,
        speed: 2 + Math.random() * 3
      });
    }
    requestAnimationFrame(drawConfetti);
    setTimeout(() => confetti = [], 5000);
  }

  function drawConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    confetti.forEach(p => {
      ctx.fillStyle = p.color;
      ctx.fillRect(p.x, p.y, p.size, p.size);
      p.y += p.speed;
      if (p.y > canvas.height) p.y = 0;
    });
    if (confetti.length) requestAnimationFrame(drawConfetti);
  }

  // ========== Init ==========

  updateStepper(1);
  setupConfetti();
</script>
</body>
</html>
